### 2018-12-17 周一

#### 负载均衡

#### 背景

> 当一台服务器的性能达到极限时，我们可以使用服务器集群来提高网站的整体性能。  
> 那么，在服务器集群中，需要有一台服务器充当调度者的角色，用户的所有请求都会首先由它接收，  
> 调度者再根据每台服务器的负载情况将请求分配给某一台后端服务器去处理


#### 几种实现方式

+ HTTP重定向

> 当用户向服务器发起请求时，请求首先被集群调度者截获；调度者根据某种分配策略，  
> 选择一台服务器，并将选中的服务器的IP地址封装在HTTP响应消息头部的Location字段中，
> 并将响应消息的状态码设为302，最后将这个响应消息返回给浏览器。
>
> 当浏览器收到响应消息后，解析Location字段，并向该URL发起请求，然后指定的服务器  
> 处理该用户的请求，最后将结果返回给用户

+ DNS负载均衡

> 将我们的域名指向多个后端服务器(将一个域名解析到多个IP上)，再设置一下调度策略
>
> 当用户向我们的域名发起请求时，DNS服务器会自动地根据我们事先设定好的调度策略
> 选一个合适的IP返回给用户，用户再向该IP发起请求

+ 反向代理

> 反向代理服务器是一个位于实际服务器之前的服务器，所有向我们网站发来的请求都
> 首先要经过反向代理服务器，服务器根据用户的请求要么直接将结果返回给用户，
> 要么将请求交给后端服务器处理，再返回给用户